<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Keith Post">
<meta name="dcterms.date" content="2024-06-16">

<title>Spaceship Titanic Machine Learning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="spaceship_titanic_ml_report_files/libs/clipboard/clipboard.min.js"></script>
<script src="spaceship_titanic_ml_report_files/libs/quarto-html/quarto.js"></script>
<script src="spaceship_titanic_ml_report_files/libs/quarto-html/popper.min.js"></script>
<script src="spaceship_titanic_ml_report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="spaceship_titanic_ml_report_files/libs/quarto-html/anchor.min.js"></script>
<link href="spaceship_titanic_ml_report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="spaceship_titanic_ml_report_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="spaceship_titanic_ml_report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="spaceship_titanic_ml_report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="spaceship_titanic_ml_report_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Spaceship Titanic Machine Learning</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Keith Post </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 16, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
</section>
<section id="i.-initial-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="i.-initial-wrangling">I. Initial Wrangling</h2>
<p>Here is a sample of the training dataset.</p>
<p><br></p>
<p><strong>Table 1:</strong> Five records of the training dataset capturing all variables in the raw data file</p>
<div class="cell" data-execution_count="2">
<div class="cell-output cell-output-display" data-execution_count="2">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">passenger_id</th>
<th data-quarto-table-cell-role="th">home_planet</th>
<th data-quarto-table-cell-role="th">cryo_sleep</th>
<th data-quarto-table-cell-role="th">cabin</th>
<th data-quarto-table-cell-role="th">destination</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">vip</th>
<th data-quarto-table-cell-role="th">room_service</th>
<th data-quarto-table-cell-role="th">food_court</th>
<th data-quarto-table-cell-role="th">shopping_mall</th>
<th data-quarto-table-cell-role="th">spa</th>
<th data-quarto-table-cell-role="th">vr_deck</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">transported</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0001_01</td>
<td>Europa</td>
<td>False</td>
<td>B/0/P</td>
<td>TRAPPIST-1e</td>
<td>39.0</td>
<td>False</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>Maham Ofracculy</td>
<td>False</td>
</tr>
<tr class="even">
<td>0002_01</td>
<td>Earth</td>
<td>False</td>
<td>F/0/S</td>
<td>TRAPPIST-1e</td>
<td>24.0</td>
<td>False</td>
<td>109.0</td>
<td>9.0</td>
<td>25.0</td>
<td>549.0</td>
<td>44.0</td>
<td>Juanna Vines</td>
<td>True</td>
</tr>
<tr class="odd">
<td>0003_01</td>
<td>Europa</td>
<td>False</td>
<td>A/0/S</td>
<td>TRAPPIST-1e</td>
<td>58.0</td>
<td>True</td>
<td>43.0</td>
<td>3576.0</td>
<td>0.0</td>
<td>6715.0</td>
<td>49.0</td>
<td>Altark Susent</td>
<td>False</td>
</tr>
<tr class="even">
<td>0003_02</td>
<td>Europa</td>
<td>False</td>
<td>A/0/S</td>
<td>TRAPPIST-1e</td>
<td>33.0</td>
<td>False</td>
<td>0.0</td>
<td>1283.0</td>
<td>371.0</td>
<td>3329.0</td>
<td>193.0</td>
<td>Solam Susent</td>
<td>False</td>
</tr>
<tr class="odd">
<td>0004_01</td>
<td>Earth</td>
<td>False</td>
<td>F/1/S</td>
<td>TRAPPIST-1e</td>
<td>16.0</td>
<td>False</td>
<td>303.0</td>
<td>70.0</td>
<td>151.0</td>
<td>565.0</td>
<td>2.0</td>
<td>Willy Santantines</td>
<td>True</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This preview indicates that multiple string fields can be split into separate variables (Table 1). Specifically, <em>passenger_id</em> is composed of a 4-digit <em>passenger_group</em> and a 2-digit <em>ticket</em> split by an underscore. <em>cabin</em> comprises <em>deck</em>, <em>num</em> (room number), and <em>side</em> (either P for port or S for starboard) separated by “/”s. Understandably, <em>name</em> has two components: a first name (<em>f_name</em>) and a last name (<em>l_name</em>).</p>
<p>These new variables were created by splitting up <em>passenger_id</em>, <em>cabin</em>, and <em>name</em> (Table 2).</p>
<p><br></p>
<p><strong>Table 2:</strong> Sample of training data showing the three string variables and their respective components</p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="3">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">passenger_id</th>
<th data-quarto-table-cell-role="th">passenger_group</th>
<th data-quarto-table-cell-role="th">ticket</th>
<th data-quarto-table-cell-role="th">cabin</th>
<th data-quarto-table-cell-role="th">deck</th>
<th data-quarto-table-cell-role="th">num</th>
<th data-quarto-table-cell-role="th">side</th>
<th data-quarto-table-cell-role="th">name</th>
<th data-quarto-table-cell-role="th">f_name</th>
<th data-quarto-table-cell-role="th">l_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0001_01</td>
<td>0001</td>
<td>01</td>
<td>B/0/P</td>
<td>B</td>
<td>0</td>
<td>P</td>
<td>Maham Ofracculy</td>
<td>Maham</td>
<td>Ofracculy</td>
</tr>
<tr class="even">
<td>0002_01</td>
<td>0002</td>
<td>01</td>
<td>F/0/S</td>
<td>F</td>
<td>0</td>
<td>S</td>
<td>Juanna Vines</td>
<td>Juanna</td>
<td>Vines</td>
</tr>
<tr class="odd">
<td>0003_01</td>
<td>0003</td>
<td>01</td>
<td>A/0/S</td>
<td>A</td>
<td>0</td>
<td>S</td>
<td>Altark Susent</td>
<td>Altark</td>
<td>Susent</td>
</tr>
<tr class="even">
<td>0003_02</td>
<td>0003</td>
<td>02</td>
<td>A/0/S</td>
<td>A</td>
<td>0</td>
<td>S</td>
<td>Solam Susent</td>
<td>Solam</td>
<td>Susent</td>
</tr>
<tr class="odd">
<td>0004_01</td>
<td>0004</td>
<td>01</td>
<td>F/1/S</td>
<td>F</td>
<td>1</td>
<td>S</td>
<td>Willy Santantines</td>
<td>Willy</td>
<td>Santantines</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="ii.-exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="ii.-exploratory-data-analysis">II. Exploratory Data Analysis</h2>
<p>The wrangled data were explored visually using univariate and bivariate plots.</p>
<section id="a.-univariate" class="level3">
<h3 class="anchored" data-anchor-id="a.-univariate">A. Univariate</h3>
<p>Histograms of the six numerical predictors–<em>age</em>, <em>room_service</em>, <em>food_court</em>, <em>shopping_mall</em>, <em>spa</em>, and <em>vr_deck</em>–were constructed.</p>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-5-output-1.png" width="662" height="566"></p>
</div>
</div>
<p><strong>Figure 1:</strong> Frequency distributions of the six numerical predictors in the training data</p>
<p><br></p>
<p><em>age</em> has a right-skewed distribution. The histograms of the remaining predictors indicate high frequencies of 0s (Fig. 1).</p>
<p>Categorical variables were visualized using barplots.</p>
<div class="cell" data-execution_count="5">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-6-output-1.png" width="662" height="566"></p>
</div>
</div>
<p><strong>Figure 2:</strong> Frequency distributions of the five categorical predictors in the training data</p>
<p><br></p>
<p><em>ticket</em> frequencies decreased as their numbers increased. <em>home_planet</em> counts were similar for Europa and Mars but much greater for Earth. Categories F and G in <em>deck</em> were more common than the rest, while T was clearly the rarest level. <em>side</em> was similarly distributed between S and P. Finally, TRAPPIST-1e was the most common <em>destination</em>, followed by 55 Cancri e and finally PSO J318.5-22 (Fig. 2).</p>
<p>Like categorical variables, Boolean features were also explored with barplots.</p>
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-7-output-1.png" width="374" height="278"></p>
</div>
</div>
<p><strong>Figure 3:</strong> Frequency distributions of the two Boolean predictors in the training data</p>
<p><br></p>
<p>The 0 bar is associated with False, while the 1 bar is associated with True values. <em>cryo_sleep</em> (whether passenger was in cryogenic sleep during duration of voyage) had 2000 more False than True values, while <em>vip</em> (whether passengers paid for VIP services) had even greater disparity with under 500 False values (Fig. 3).</p>
</section>
<section id="b.-bivariate" class="level3">
<h3 class="anchored" data-anchor-id="b.-bivariate">B. Bivariate</h3>
<p>Bivariate plots of each predictor with the target variable, <em>transported</em>, were constructed to understand this relationship, which may provide insight into variable importance when investigating model diagnostics.</p>
<div class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-8-output-1.png" width="709" height="470"></p>
</div>
</div>
<p><strong>Figure 4:</strong> Boxplots of numerical features by <em>transported</em> status</p>
<p><br></p>
<p>From these results, <em>age</em> is distributed similarly between <em>transported</em> values. However, the remaining five numerical predictors (i.e., <em>room_service</em>, <em>food_court</em>, <em>shopping_mall</em>, <em>spa</em>, and <em>vr_deck</em>) were consistently greater when passengers were not transported relative to when they were (Fig. 4).</p>
<p>Grouped bar plots were constructed to understand frequency differences among factor levels and between <em>transported</em> values.</p>
<div class="cell" data-execution_count="8">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-9-output-1.png" width="465" height="565"></p>
</div>
</div>
<p><strong>Figure 5:</strong> Numbers of passengers by <em>destination</em> and <em>transported</em></p>
<p><br></p>
<p>Figure 5 shows that there were slightly more passengers transported whose <em>home_planet</em> was Mars. In contrast, this discrepancy grew for <em>home_planet</em> Europa and occurred in the opposite pattern for <em>home_planet</em> Earth.</p>
<p>Boolean predictors were graphed in the same manner as categorical variables.</p>
<div class="cell" data-execution_count="9">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-10-output-1.png" width="465" height="565"></p>
</div>
</div>
<p><strong>Figure 6:</strong> Numbers of passengers by <em>cryo_sleep</em> and <em>transported</em></p>
<p><br></p>
<p>Substantially more passengers without <em>cryo_sleep</em> were not transported than were, and the opposite was true of passengers with <em>cryo_sleep</em> (Fig. 6).</p>
</section>
</section>
<section id="iii.-discretize-num-variable" class="level2">
<h2 class="anchored" data-anchor-id="iii.-discretize-num-variable">III. Discretize <em>num</em> variable</h2>
<p>The predictor <em>num</em> comes from the original variable <em>cabin</em>, and it indicates the room number of the cabin. Typically (but not always) the leading digit of a room number represents the floor number, so room 204 would occur on the second floor (or perhaps the 3rd floor, if there is numbering with a leading 0, such as room 025). Regardless, it’s another way to differentiate rooms, and thus passengers, in a categorical manner. In contrast, there are numerous rooms (values of <em>num</em>) and they don’t have any numerical meaning, so some type of feature extraction is warranted.</p>
<p>The relationships between the target variable and floors (<em>floor</em>) and groups of two (<em>floor_2</em>), three (<em>floor_3</em>), and four (<em>floor_4</em>) floors were visualized.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">A. <em>floor</em></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">B. <em>floor_2</em></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">C. <em>floor_3</em></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">D. <em>floor_4</em></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-11-output-1.png" width="466" height="565"></p>
</div>
</div>
<p><strong>Figure 7a:</strong> Numbers of passengers by <em>floor</em> and <em>transported</em></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-execution_count="11">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-12-output-1.png" width="485" height="565"></p>
</div>
</div>
<p><strong>Figure 7b:</strong> Numbers of passengers by groups of two floors and <em>transported</em></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell" data-execution_count="12">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-13-output-1.png" width="477" height="565"></p>
</div>
</div>
<p><strong>Figure 7c:</strong> Numbers of passengers by groups of three floors and <em>transported</em></p>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-14-output-1.png" width="466" height="565"></p>
</div>
</div>
<p><strong>Figure 7d:</strong> Numbers of passengers by groups of four floors and <em>transported</em></p>
</div>
</div>
</div>
<p>Although there are differences in counts of <em>transported</em> status by floor and groups of two floors, larger bins of floors also show these deviations and are easier to work with as they yield fewer categories (Figs. 7a-d). Thus, <em>floor_4</em> was selected as a feature.</p>
</section>
<section id="iv.-create-new-size-variables" class="level2">
<h2 class="anchored" data-anchor-id="iv.-create-new-size-variables">IV. Create New ‘Size’ Variables</h2>
<p>The size of the travelling group may be related to <em>transported</em>, so two new features were created from the data: <em>group_size</em> and <em>cabin_size</em>. The former measures the number of passengers associated with a <em>passenger_group</em>, while the latter is defined by the total occupants in the same <em>cabin</em>.</p>
</section>
<section id="v.-data-imputation" class="level2">
<h2 class="anchored" data-anchor-id="v.-data-imputation">V. Data Imputation</h2>
<section id="a.-assess-missingness" class="level3">
<h3 class="anchored" data-anchor-id="a.-assess-missingness">A. Assess missingness</h3>
<p>After creating/extracting new features from the original training data set (e.g., <em>passenger_group</em>, <em>ticket</em>, <em>deck</em>, <em>side</em>, <em>floor_4</em>, <em>group_size</em>, <em>cabin_size</em>), missingness across all variables was assessed.</p>
<p><br></p>
<p><strong>Table 3:</strong> Numbers of missing values by variable for variables with at least one missing value</p>
<div class="cell" data-execution_count="14">
<div class="cell-output cell-output-display" data-execution_count="14">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">variable</th>
<th data-quarto-table-cell-role="th">n_missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>shopping_mall</td>
<td>208</td>
</tr>
<tr class="even">
<td>home_planet</td>
<td>201</td>
</tr>
<tr class="odd">
<td>name</td>
<td>200</td>
</tr>
<tr class="even">
<td>l_name</td>
<td>200</td>
</tr>
<tr class="odd">
<td>f_name</td>
<td>200</td>
</tr>
<tr class="even">
<td>floor_4</td>
<td>199</td>
</tr>
<tr class="odd">
<td>side</td>
<td>199</td>
</tr>
<tr class="even">
<td>num</td>
<td>199</td>
</tr>
<tr class="odd">
<td>deck</td>
<td>199</td>
</tr>
<tr class="even">
<td>cabin_size</td>
<td>199</td>
</tr>
<tr class="odd">
<td>cabin</td>
<td>199</td>
</tr>
<tr class="even">
<td>vr_deck</td>
<td>188</td>
</tr>
<tr class="odd">
<td>spa</td>
<td>183</td>
</tr>
<tr class="even">
<td>food_court</td>
<td>183</td>
</tr>
<tr class="odd">
<td>destination</td>
<td>182</td>
</tr>
<tr class="even">
<td>room_service</td>
<td>181</td>
</tr>
<tr class="odd">
<td>age</td>
<td>179</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>A number of predictors have roughly 200 missing values (Table 3). The pattern of missingness was assessed using Little’s MCAR test, which was not significant (<em>X<sup>2</sup></em> = 8.46 x 10<sup>-30</sup>, <em>p</em> = 1), providing evidence that missingness is completely at random.</p>
</section>
<section id="b.-impute-values" class="level3">
<h3 class="anchored" data-anchor-id="b.-impute-values">B. Impute values</h3>
<p>Given the MCAR pattern, simple univariate methods were employed to impute values. For numerical and Boolean predictors, median imputation was implemented. The median value of features with high frequencies of zeros would help capture the severely skewed distributions (Fig. 1). Median imputation for Boolean features is analogous to selecting the most common category, whether that’s True or False. That approach was chosen because missing categorical variables were imputed in the same manner: the most frequent category replaced missing values for that particular variable.</p>
</section>
</section>
<section id="vi.-feature-engineering-and-selection" class="level2">
<h2 class="anchored" data-anchor-id="vi.-feature-engineering-and-selection">VI. Feature Engineering and Selection</h2>
<section id="a.-check-for-multicollinearity" class="level3">
<h3 class="anchored" data-anchor-id="a.-check-for-multicollinearity">A. Check for multicollinearity</h3>
<p>Multicollinearity among numerical features was assessed by creating a Pearson correlation matrix.</p>
<p><br></p>
<p><strong>Table 4:</strong> Pearson correlation matrix of numerical features</p>
<div class="cell" data-execution_count="15">
<div class="cell-output cell-output-display" data-execution_count="15">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">variable</th>
<th data-quarto-table-cell-role="th">age</th>
<th data-quarto-table-cell-role="th">room_service</th>
<th data-quarto-table-cell-role="th">food_court</th>
<th data-quarto-table-cell-role="th">shopping_mall</th>
<th data-quarto-table-cell-role="th">spa</th>
<th data-quarto-table-cell-role="th">vr_deck</th>
<th data-quarto-table-cell-role="th">group_size</th>
<th data-quarto-table-cell-role="th">cabin_size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>1</td>
<td>0.0686</td>
<td>0.127</td>
<td>0.0331</td>
<td>0.121</td>
<td>0.0996</td>
<td>-0.177</td>
<td>-0.16</td>
</tr>
<tr class="even">
<td>room_service</td>
<td>0.0686</td>
<td>1</td>
<td>-0.0151</td>
<td>0.0523</td>
<td>0.00924</td>
<td>-0.0186</td>
<td>-0.0397</td>
<td>-0.0646</td>
</tr>
<tr class="odd">
<td>food_court</td>
<td>0.127</td>
<td>-0.0151</td>
<td>1</td>
<td>-0.0137</td>
<td>0.221</td>
<td>0.225</td>
<td>0.0325</td>
<td>0.0648</td>
</tr>
<tr class="even">
<td>shopping_mall</td>
<td>0.0331</td>
<td>0.0523</td>
<td>-0.0137</td>
<td>1</td>
<td>0.0145</td>
<td>-0.00785</td>
<td>-0.0385</td>
<td>-0.051</td>
</tr>
<tr class="odd">
<td>spa</td>
<td>0.121</td>
<td>0.00924</td>
<td>0.221</td>
<td>0.0145</td>
<td>1</td>
<td>0.148</td>
<td>0.0192</td>
<td>0.0411</td>
</tr>
<tr class="even">
<td>vr_deck</td>
<td>0.0996</td>
<td>-0.0186</td>
<td>0.225</td>
<td>-0.00785</td>
<td>0.148</td>
<td>1</td>
<td>0.00913</td>
<td>0.0367</td>
</tr>
<tr class="odd">
<td>group_size</td>
<td>-0.177</td>
<td>-0.0397</td>
<td>0.0325</td>
<td>-0.0385</td>
<td>0.0192</td>
<td>0.00913</td>
<td>1</td>
<td>0.878</td>
</tr>
<tr class="even">
<td>cabin_size</td>
<td>-0.16</td>
<td>-0.0646</td>
<td>0.0648</td>
<td>-0.051</td>
<td>0.0411</td>
<td>0.0367</td>
<td>0.878</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>No pair of numerical predictors was highly correlated (all <em>r</em> &lt; 0.9); thus, none was dropped from the training data due to multicollinearity (Table 4).</p>
</section>
<section id="b.-feature-scaling" class="level3">
<h3 class="anchored" data-anchor-id="b.-feature-scaling">B. Feature scaling</h3>
<p>Numerical predictors were assessed visually for normality to understand the type of scaling needed.</p>
<div class="cell" data-execution_count="16">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-17-output-1.png" width="765" height="566"></p>
</div>
</div>
<p><strong>Figure 8:</strong> Q-Q plots of the eight numerical predictors</p>
<p><br></p>
<p>Aside from <em>age</em>, no numerical features exhibited a normal distribution (Fig. 8). Thus, these features underwent normalization (min-max scaling).</p>
</section>
<section id="c.-rare-label-encoding" class="level3">
<h3 class="anchored" data-anchor-id="c.-rare-label-encoding">C. Rare label encoding</h3>
<p>Rare categories can cause problems when fitting models because they can either 1) be absent in a cross-validation fold or 2) occur at low frequencies which could lead to model overfitting. Thus, it’s important to combine rare factor levels or add them to more common categories to prevent absence or low frequencies of categories during cross-validation.</p>
<div class="cell" data-execution_count="17">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-18-output-1.png" width="808" height="662"></p>
</div>
</div>
<p><strong>Figure 9:</strong> Numbers of each category for all six categorical variables</p>
<p><br></p>
<p>Using a threshold of 2% (or 174 passengers for the training data), two variables show concern for rarity of factor levels: <em>ticket</em> and categories 5-8 and <em>deck</em> and category T (Fig. 9). To address these rarities, tickets 5-8 were combined into a single category called ‘05_08’ and deck T was added to deck A to form ‘A_T’.</p>
</section>
<section id="d.-one-hot-encoding" class="level3">
<h3 class="anchored" data-anchor-id="d.-one-hot-encoding">D. One-hot encoding</h3>
<p>Although some categorical features have a built-in order to them (e.g., numerical, alphabetical), no obvious inherent ranks are associated with any of these features (e.g., <em>home_planet</em>, <em>deck</em>). Thus, one-hot encoding was used for all categorical variables.</p>
</section>
<section id="e.-finalization" class="level3">
<h3 class="anchored" data-anchor-id="e.-finalization">E. Finalization</h3>
<p>Extraneous variables (e.g., <em>name</em>, <em>num</em>, <em>cabin</em>) were removed, leaving behind the following explanatory variables (Table 5) and <em>transported</em>, the target variable.</p>
<p><br></p>
<p><strong>Table 5:</strong> Final list of features used in modelling the training data to predict <em>transported</em></p>
<div class="cell" data-execution_count="18">
<div class="cell-output cell-output-display" data-execution_count="18">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<tbody>
<tr class="odd">
<td>passenger_id</td>
<td>age</td>
<td>room_service</td>
<td>food_court</td>
</tr>
<tr class="even">
<td>shopping_mall</td>
<td>spa</td>
<td>vr_deck</td>
<td>group_size</td>
</tr>
<tr class="odd">
<td>cabin_size</td>
<td>ticket_01</td>
<td>ticket_02</td>
<td>ticket_03</td>
</tr>
<tr class="even">
<td>ticket_04</td>
<td>ticket_05_08</td>
<td>home_planet_Earth</td>
<td>home_planet_Europa</td>
</tr>
<tr class="odd">
<td>home_planet_Mars</td>
<td>deck_A_T</td>
<td>deck_B</td>
<td>deck_C</td>
</tr>
<tr class="even">
<td>deck_D</td>
<td>deck_E</td>
<td>deck_F</td>
<td>deck_G</td>
</tr>
<tr class="odd">
<td>side_P</td>
<td>side_S</td>
<td>destination_55 Cancri e</td>
<td>destination_PSO J318.5-22</td>
</tr>
<tr class="even">
<td>destination_TRAPPIST-1e</td>
<td>floor_4_floors_0_4</td>
<td>floor_4_floors_12_16</td>
<td>floor_4_floors_16_20</td>
</tr>
<tr class="odd">
<td>floor_4_floors_4_8</td>
<td>floor_4_floors_8_12</td>
<td>cryo_sleep</td>
<td>vip</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="vii.-modelling" class="level2">
<h2 class="anchored" data-anchor-id="vii.-modelling">VII. Modelling</h2>
<section id="a.-fit-models-to-training-data" class="level3">
<h3 class="anchored" data-anchor-id="a.-fit-models-to-training-data">A. Fit models to training data</h3>
<p>Three model types were used in modelling: logistic regression, decision tree, and random forest. These models were fit to the training dataset via cross-validation on five folds. The mean accuracy scores were as follows: 0.794 (random forest), 0.767 (logistic regression), and 0.725 (decision tree). The random forest model was selected and tuned.</p>
</section>
<section id="b.-hyperparameter-tuning-and-model-selection" class="level3">
<h3 class="anchored" data-anchor-id="b.-hyperparameter-tuning-and-model-selection">B. Hyperparameter tuning and model selection</h3>
<p>The following hyperparameter combinations were used in tuning the random forest model:</p>
<ul>
<li><em>min_samples_leaf</em> (minimum number of samples required at a leaf node): 2, 5, 10, 20</li>
<li><em>min_samples_split</em> (minimum number of samples required to split an internal node): 2, 5, 10, 20</li>
<li><em>n_estimators</em> (number of trees): 50, 100, 500</li>
</ul>
<p>The best model had <em>min_samples_leaf</em> = 2, <em>min_samples_split</em> = 10, and <em>n_estimators</em> = 500 and a mean accuracy score of 0.801.</p>
</section>
<section id="c.-diagnostics" class="level3">
<h3 class="anchored" data-anchor-id="c.-diagnostics">C. Diagnostics</h3>
<p>Diagnostics were evaluated in two ways. First, a confusion matrix was constructed to visualize the accuracy of true and false predictions against the actual values.</p>
<div class="cell" data-execution_count="19">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>Figure 10:</strong> Confusion matrix of the tuned random forest model on the training data</p>
<p><br></p>
<p>This confusion matrix shows slightly better accuracy when the actual label is false (91.4%) than when it is true (89.4%; Fig. 10).</p>
<p>Second, feature importances were visualized to understand how much each feature contributes to predictions.</p>
<div class="cell" data-execution_count="20">
<div class="cell-output cell-output-display">
<p><img src="spaceship_titanic_ml_report_files/figure-html/cell-21-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>Figure 11:</strong> Plots of feature importances for each feature in descending order</p>
<p><br></p>
<p>The feature importances plot shows a clear distinction between highly important and less important features. <em>spa</em>, <em>vr_deck</em>, <em>cryo_sleep</em>, <em>room_service</em>, <em>food_court</em>, <em>shopping_mall</em>, and <em>age</em> contribute significantly more to the predictions than the remaining features. Interestingly, aside from <em>cryo_sleep</em>, these are all numerical predictors. Furthermore, aside from <em>age</em>, the remaining highly important features quantify the amounts of luxury amenities billed by passengers.</p>
</section>
</section>
<section id="viii.-test-data-preparation" class="level2">
<h2 class="anchored" data-anchor-id="viii.-test-data-preparation">VIII. Test Data Preparation</h2>
<p>The test data were prepared using the same methods as the training data:</p>
<ul>
<li>string variables <em>passenger_id</em>, <em>cabin</em>, and <em>name</em> were split into their respective components</li>
<li><em>floor_4</em> was extracted from <em>num</em> (which was derived from <em>cabin</em>)</li>
<li>predictors <em>group_size</em> and <em>cabin_size</em> were created from <em>passenger_group</em> and <em>cabin</em>, respectively</li>
<li>missing numerical and Boolean values were imputed with median values</li>
<li>missing categorical variables were imputed with the most frequent category</li>
<li>numerical features were normalized (min-max scaling applied)</li>
<li>one-hot encoding was applied to categorical features</li>
<li>the same final set of features used in the training data were selected for the test data</li>
</ul>
</section>
<section id="ix.-model-evaluation" class="level2">
<h2 class="anchored" data-anchor-id="ix.-model-evaluation">IX. Model Evaluation</h2>
<p>The tuned random forest model (<em>min_samples_leaf</em> = 2, <em>min_samples_split</em> = 10, and <em>n_estimators</em> = 500) was evaluated on the test data by predicting <em>transported</em> status of 4,277 passengers. These predicted values were submitted to Kaggle for scoring, resulting in an accuracy of <strong>0.79915</strong> or <strong>79.9%</strong>.</p>
<p>In comparison, this same model had an accuracy of <strong>80.1%</strong> on the training data. The best model on the Kaggle leaderboard at time of submission was <strong>82.8%</strong> accurate. Thus, this indicates that the tuned random forest model exhibited low-moderate bias and variance and does not demonstrate under- or over-fitting.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>